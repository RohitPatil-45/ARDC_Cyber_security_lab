<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">

<head th:include="template :: headFragment(${pageTitle})">
	<title>View Playlist | Cyber Ranges</title>
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
	<link
		href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&family=Poppins:wght@400;600;700&display=swap"
		rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css">

	<!-- Bootstrap Multiselect CSS -->
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-multiselect/dist/css/bootstrap-multiselect.css">
</head>

<style>
	body {
		background-color: #ffffff;
		color: #333333;
		font-family: 'Roboto', sans-serif;
	}

	.content-wrapper {
		background-color: #f8f9fa;
	}

	/* Playlist Card */
	.playlist-card {
		background-color: #ffffff;
		border: 2px solid #e0e0e0;
		border-radius: 12px;
		overflow: hidden;
		color: #333333;
		box-shadow: 0 2px 12px rgba(0, 0, 0, 0.08);
		transition: transform 0.2s, box-shadow 0.2s;
	}

	.card-image img {
		width: 100%;
		height: 280px;
		object-fit: cover;
		border-bottom: 2px solid #e9ecef;
	}

	.card-content {
		padding: 20px;
	}

	/* Playlist Title */
	.card-title {
		font-family: 'Poppins', sans-serif;
		font-size: 1.6rem;
		font-weight: 700;
		color: #2d4fa6;
		margin: 0;
	}

	/* Playlist Tags */
	.card-tags {
		margin-top: 12px;
		display: flex;
		flex-wrap: wrap;
		gap: 8px;
	}

	.card-tags .tag {
		display: flex;
		align-items: center;
		gap: 6px;
		background: #f1f5f9;
		color: #2d4fa6;
		font-size: 0.85rem;
		font-weight: 500;
		padding: 6px 12px;
		border-radius: 12px;
		text-transform: uppercase;
	}

	/* Playlist Info */
	.playlist-info {
		margin-top: 20px;
		background-color: #ffffff;
		border: 1px solid #e0e0e0;
		border-radius: 12px;
		padding: 20px;
		box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
	}

	.playlist-info h4 {
		color: #2d4fa6;
		margin-bottom: 10px;
	}

	.playlist-info p {
		color: #333333;
		margin-bottom: 6px;
		font-size: 0.95rem;
	}

	/* Add Scenario Button */
	.add-btn {
		background: linear-gradient(90deg, #16a34a, #22c55e);
		color: #fff;
		padding: 8px 18px;
		border-radius: 20px;
		font-size: 0.9rem;
		font-weight: 600;
		text-decoration: none;
		display: inline-flex;
		align-items: center;
		gap: 6px;
		box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
		transition: all 0.3s ease;
		border: none;
	}

	.add-btn:hover {
		background: linear-gradient(90deg, #15803d, #16a34a);
		transform: translateY(-2px);
		box-shadow: 0 4px 12px rgba(22, 163, 74, 0.3);
		color: #fff;
		text-decoration: none;
	}

	.playlist-title-tags {
		display: flex;
		align-items: center;
		gap: 10px;
		/* space between title and tags */
	}

	.card-tags .tag {
		font-size: 0.85rem;
		padding: 4px 10px;
	}

	/* Dropdown menu styling for light theme */
	.dropdown-menu {
		background-color: #ffffff;
		border: 1px solid #e0e0e0;
	}

	.dropdown-item {
		color: #333333;
	}

	.dropdown-item:hover {
		background-color: #2d4fa6;
		color: #fff;
	}

	/* Sub-playlist card styling */
	.sub-playlist-card {
		background-color: #ffffff;
		border: 1px solid #e0e0e0;
		border-radius: 8px;
		padding: 15px;
		margin-bottom: 15px;
		cursor: pointer;
		transition: all 0.3s ease;
		box-shadow: 0 1px 4px rgba(0, 0, 0, 0.05);
	}

	.sub-playlist-card:hover {
		background-color: #f8f9fa;
		transform: translateY(-2px);
		box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
	}

	.sub-playlist-content {
		display: flex;
		justify-content: space-between;
		align-items: center;
	}

	.sub-playlist-scenarios {
		margin-top: 10px;
		padding: 10px;
		background-color: #f8f9fa;
		border-radius: 6px;
		display: none;
	}

	.sub-playlist-scenarios.show {
		display: block;
	}

	/* Scenario card styling */
	.scenario-card {
		background-color: #ffffff;
		border: 1px solid #e0e0e0;
		border-radius: 8px;
		padding: 15px;
		margin-bottom: 15px;
		transition: all 0.3s ease;
		box-shadow: 0 1px 4px rgba(0, 0, 0, 0.05);
	}

	.scenario-card:hover {
		background-color: #f8f9fa;
		transform: translateY(-2px);
		box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
	}

	.scenario-content {
		display: flex;
		justify-content: space-between;
		align-items: center;
	}

	/* Form controls */
	.form-control {
		background-color: #ffffff;
		border: 1px solid #ced4da;
		color: #333333;
	}

	.form-control:focus {
		border-color: #2d4fa6;
		box-shadow: 0 0 0 2px rgba(45, 79, 166, 0.2);
	}

	.btn-outline-primary {
		color: #2d4fa6;
		border-color: #2d4fa6;
	}

	.btn-outline-primary:hover {
		background-color: #2d4fa6;
		border-color: #2d4fa6;
		color: white;
	}

	/* Primary button */
	.btn-primary {
		background-color: #2d4fa6;
		border-color: #2d4fa6;
	}

	.btn-primary:hover {
		background-color: #1e3a8a;
		border-color: #1e3a8a;
	}

	/* Success button */
	.btn-success {
		background-color: #22c55e;
		border-color: #22c55e;
	}

	.btn-success:hover {
		background-color: #16a34a;
		border-color: #16a34a;
	}

	/* Modal styling for light theme */
	.modal-content {
		background-color: #ffffff;
		color: #333333;
	}

	.modal-header {
		border-bottom: 1px solid #e0e0e0;
	}

	.modal-footer {
		border-top: 1px solid #e0e0e0;
	}

	/* Content header */
	.content-header h1 {
		color: #2d4fa6;
	}

	/* Breadcrumb styling */
	.breadcrumb {
		background-color: transparent;
	}

	.breadcrumb-item a {
		color: #2d4fa6;
		text-decoration: none;
	}

	.breadcrumb-item a:hover {
		color: #1e3a8a;
		text-decoration: underline;
	}
</style>

<body class="hold-transition sidebar-mini layout-fixed">
	<div class="wrapper">
		<div th:replace="fragments/header :: header"></div>
		<div th:replace="fragments/sidebar :: aside"></div>

		<div class="content-wrapper">
			<section class="content-header">
				<div class="container-fluid">
					<div class="row mb-2">
						<div class="col-sm-6">
							<h1>
								<i class="fas fa-list-ol playlist-icon"></i> View Playlist
							</h1>
						</div>
						<div class="col-sm-6">
							<ol class="breadcrumb float-sm-right">
								<li class="breadcrumb-item"><a href="#"><i class="fas fa-home"></i> Home</a></li>
								<li class="breadcrumb-item active"><a href="#">Playlist</a></li>
							</ol>
						</div>
					</div>
				</div>
			</section>

			<section class="content">
				<div class="container-fluid" id="playlistContainer">
					<!-- Playlist details will load here -->
				</div>
			</section>
		</div>

		<div th:replace="fragments/footer :: footer"></div>
	</div>

	<div th:replace="template :: jsscript"></div>

	<!-- Add Scenario Modal -->
	<div class="modal fade" id="addScenarioModal" tabindex="-1" role="dialog" aria-labelledby="addScenarioModalLabel"
		aria-hidden="true">
		<div class="modal-dialog modal-lg" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title" id="addScenarioModalLabel">Add
						Scenario to Playlist</h5>
					<button type="button" class="close" data-dismiss="modal" aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
				</div>
				<div class="modal-body">
					<form id="addScenarioForm">
						<div class="form-group">
							<label for="scenarioDropdown">Select Scenario</label> <select id="scenarioDropdown"
								class="form-control" multiple="multiple">
								<option th:each="scenario : ${scenarioList}" th:value="${scenario.Id}"
									th:text="${scenario.ScenarioName}">
								</option>
							</select>
						</div>
					</form>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
					<button type="submit" form="addScenarioForm" class="btn btn-primary">Add</button>
				</div>
			</div>
		</div>
	</div>

	<div class="modal fade" id="addSubPlaylistModal" tabindex="-1" role="dialog"
		aria-labelledby="addSubPlaylistModalLabel" aria-hidden="true">
		<div class="modal-dialog modal-lg" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title" id="addSubPlaylistModalLabel">Add Sub
						Playlist</h5>
					<button type="button" class="close" data-dismiss="modal" aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
				</div>
				<div class="modal-body">
					<form id="addSubPlaylistForm">
						<div class="form-group">
							<label for="subPlaylistDropdown" class="required-field">Select
								Sub Playlist</label> <select id="subPlaylistDropdown" name="subPlaylistDropdown"
								class="form-control" required>
								<option value="">-- Select --</option>
								<option th:each="sub : ${subPlaylists}" th:value="${sub.id}"
									th:text="${sub.playlistName}"></option>
							</select>
						</div>
					</form>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
					<button type="submit" form="addSubPlaylistForm" class="btn btn-primary">Add</button>
				</div>
			</div>
		</div>
	</div>

	<!-- Scripts -->
	<script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"></script>

	<script>
		document.addEventListener("DOMContentLoaded", function () {
			let rawData = '[[${listObj}]]'.replace(/&quot;/g, '"');
			let jsonData;

			try {
				jsonData = JSON.parse(rawData);
			} catch (e) {
				console.error("Invalid JSON:", e);
				return;
			}

			if (!jsonData || !jsonData.length) return;

			const playlistItem = jsonData.find(obj => obj.PlaylistName !== undefined);
			const scenarioItems = jsonData.filter(obj => obj.item_type === "scenario");
			const subPlaylistItems = jsonData.filter(obj => obj.item_type === "sub_playlist");

			const container = document.getElementById("playlistContainer");
			const fragment = document.createDocumentFragment();

			const cardHTML = `
        <div class="col-md-12 mb-4">
            <div class="playlist-card">
                <div class="card-image">
                    <img src="/guac/Playlistimage/${playlistItem.Id}" alt="${playlistItem.PlaylistTitle}" loading="lazy">
                </div>
                <div class="card-content">
                <div class="d-flex justify-content-between align-items-center mb-2">
                <h3 class="card-title mb-0">${playlistItem.PlaylistName}</h3>

                <div class="d-flex align-items-center">
                    <!-- Action Dropdown -->
                    <div class="form-group mb-0 mr-2">
                        <select required id="Actions_${playlistItem.Id}" name="Actions"
                                class="form-control btn btn-outline-primary"
                                style="padding: 8px 12px; height: 38px; font-weight: 500;"
                                onchange="handleActionChange(this, '${playlistItem.Id}')">
                          <option value="">-- Select --</option>
                          <option value="edit">Edit</option>
                          <option value="delete">Delete</option>
                        </select>
                    </div>

                    <!-- Add Dropdown -->
                    <div class="dropdown">
                        <button class="add-btn dropdown-toggle" type="button" id="addDropdownMenu"
                                data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                          <i class="fas fa-plus"></i> Add
                        </button>
                        <div class="dropdown-menu dropdown-menu-right" aria-labelledby="addDropdownMenu">
                          <!-- Option 1: Add Scenario -->
                          <a class="dropdown-item" href="#" data-toggle="modal" data-target="#addScenarioModal">
                            <i class="fas fa-flask mr-2 text-primary"></i> Add Scenario
                          </a>
                          <!-- Option 2: Add Sub Playlist -->
                          <a class="dropdown-item" href="#" data-toggle="modal" data-target="#addSubPlaylistModal">
                            <i class="fas fa-layer-group mr-2 text-success"></i> Add Sub Playlist
                          </a>
                        </div>
                    </div>
                </div>
            </div>

                    <div class="card-tags mt-2">
                        <span class="tag"><i class="fas fa-tag"></i> ${playlistItem.Tag || 'N/A'}</span>
                    </div>
                    <div class="playlist-info mt-2">
                        <h4>Description</h4>
                        <div class="descriptionContent">
                            ${playlistItem.Description || 'N/A'}
                        </div>
                    </div>
                </div>
            </div>
        </div>
    `;

			let contentHTML = `
        <div class="col-md-12 mt-4">
           
            <div class="content-list">
    `;

			// Add scenarios
			if (scenarioItems.length > 0) {
				contentHTML += `<h5 class="mt-3 mb-3" style="color: #2d4fa6;">Scenarios</h5>`;
				scenarioItems.forEach(scenario => {
					contentHTML += `
                <div class="scenario-card d-flex align-items-center p-3 mb-3">
                    <!-- Left Image -->
                    <div class="scenario-image" style="flex:0 0 120px; margin-right:15px;">
                        <img src="/guac/Scenarioimage/${scenario.Id}" alt="${scenario.Scenario_Title}" 
                             style="width:120px; height:80px; object-fit:cover; border-radius:4px;" loading="lazy">
                    </div>

                    <!-- Middle Content -->
                    <div class="scenario-content flex-grow-1">
                        <h5 class="mb-1" style="color:#333;">${scenario.Scenario_Title}</h5>
                        <div class="d-flex flex-wrap text-muted small mb-1">
                            <span class="mr-3">${scenario.Scenario_Type || 'N/A'} (${scenario.Mode || 'N/A'})</span>
                            <span class="mr-3">${scenario.Difficulty_Level || 'N/A'}</span>
                            <span>${scenario.Duration || 'N/A'}</span>
                        </div>
                        <p class="mb-0 text-muted small">${scenario.Description || ''}</p>
                    </div>

                    <!-- Right Buttons -->
                    <div class="scenario-actions ml-3 text-right">
                        <button class="btn btn-sm btn-primary" onclick='ScenerioCardClick("${scenario.Id}")'>
                            <i class="fas fa-play"></i> START
                        </button>
                        <button class="btn btn-sm btn-link text-muted ml-2" onclick='removeItem("scenario", "${scenario.Id}")'>
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                </div>
            `;
				});
			}

			// Add sub-playlists
			if (subPlaylistItems.length > 0) {
				contentHTML += `<h5 class="mt-4 mb-3" style="color: #2d4fa6;">Sub Playlists</h5>`;
				subPlaylistItems.forEach(subPlaylist => {
					contentHTML += `
            	<div class="sub-playlist-card mb-3" onclick="toggleSubPlaylist('${subPlaylist.Id}')">
                <div class="d-flex align-items-center">
                    <!-- SubPlaylist Image -->
                    <div class="sub-playlist-image mr-3" style="flex:0 0 100px;">
                        <img src="/guac/SubPlaylistimage/${subPlaylist.Id}" 
                             alt="${subPlaylist.Playlist_Title}" 
                             style="width:100px; height:70px; object-fit:cover; border-radius:6px;">
                    </div>

                    <!-- SubPlaylist Content -->
                    <div class="sub-playlist-content flex-grow-1">
                        <h5 class="mb-1" style="color:#2d4fa6;">${subPlaylist.Playlist_Name}</h5>
                        <p class="mb-0 text-muted small">${subPlaylist.Playlist_Title}</p>
                    </div>

                    <!-- Remove Button -->
                    <div>
                        <button class="btn btn-sm btn-link text-muted" 
                                onclick="event.stopPropagation(); removeItem('sub_playlist', '${subPlaylist.Id}')">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                </div>

                <!-- Hidden Scenarios Container -->
                <div class="sub-playlist-scenarios mt-2" id="subPlaylist-${subPlaylist.Id}">
                    <div class="text-center">
                        <div class="spinner-border text-primary" role="status">
                            <span class="sr-only">Loading...</span>
                        </div>
                        <p class="mt-2">Loading scenarios...</p>
                    </div>
                </div>
            </div>

            `;
				});
			}

			contentHTML += `</div></div>`; // close list and wrapper

			const wrapper = document.createElement("div");
			wrapper.innerHTML = cardHTML + contentHTML;
			fragment.appendChild(wrapper);
			container.appendChild(fragment);
		});

		// Function to toggle sub-playlist content
		function toggleSubPlaylist(subPlaylistId) {
			const subPlaylistElement = document.getElementById(`subPlaylist-${subPlaylistId}`);
			subPlaylistElement.classList.toggle('show');

			// Load scenarios if not already loaded
			if (subPlaylistElement.classList.contains('show') && subPlaylistElement.innerHTML.includes('Loading')) {
				loadSubPlaylistScenarios(subPlaylistId);
			}
		}

		// Function to load sub-playlist scenarios
		function loadSubPlaylistScenarios(subPlaylistId) {
			const subPlaylistElement = document.getElementById(`subPlaylist-${subPlaylistId}`);

			$.ajax({
				type: "GET",
				url: "/guac/getSubPlaylistScenarios",
				data: {subPlaylistId: subPlaylistId},
				success: function (response) {
					let scenariosHTML = '';
					if (response && response.length > 0) {
						response.forEach(scenario => {
							scenariosHTML += `
                        <div class="scenario-card d-flex align-items-center p-3 mb-2">
                            <div class="scenario-image" style="flex:0 0 80px; margin-right:10px;">
                                <img src="/guac/Scenarioimage/${scenario.id}" alt="${scenario.title}" 
                                     style="width:80px; height:60px; object-fit:cover; border-radius:4px;">
                            </div>
                            <div class="scenario-content flex-grow-1">
                                <h6 class="mb-1" style="color:#333;">${scenario.title}</h6>
                                <div class="d-flex flex-wrap text-muted small">
                                    <span class="mr-2">${scenario.type || 'N/A'}</span>
                                    <span class="mr-2">${scenario.difficulty || 'N/A'}</span>
                                </div>
                            </div>
                            <div class="scenario-actions">
                                <button class="btn btn-sm btn-primary" onclick='ScenerioCardClick("${scenario.id}")'>
                                    <i class="fas fa-play"></i> START
                                </button>
                            </div>
                        </div>
                    `;
						});
					} else {
						scenariosHTML = '<p class="text-muted text-center">No scenarios found in this sub-playlist.</p>';
					}
					subPlaylistElement.innerHTML = scenariosHTML;
				},
				error: function () {
					subPlaylistElement.innerHTML = '<p class="text-danger text-center">Error loading scenarios.</p>';
				}
			});
		}

		// Function to remove item (scenario or sub-playlist)
		function removeItem(itemType, itemId) {
			let urlParams = new URLSearchParams(window.location.search);
			let playlistId = urlParams.get("Id");


			Swal.fire({
				title: "Are you sure?",
				text: `This ${itemType} will be removed from the playlist.`,
				icon: "warning",
				showCancelButton: true,
				confirmButtonColor: "#3085d6",
				cancelButtonColor: "#d33",
				confirmButtonText: "Yes, remove it",
				cancelButtonText: "Cancel"
			}).then((result) => {
				if (result.isConfirmed) {
					$.ajax({
						type: "GET",
						url: "/guac/removePlaylistItem",
						data: {
							playlistId: playlistId,
							itemType: itemType,
							itemId: itemId
						},
						success: function (response) {
							if (response === "success") {
								Swal.fire({
									icon: "success",
									title: "Removed",
									text: "Item removed successfully!",
									timer: 2000,
									showConfirmButton: false
								}).then(() => location.reload());
							} else {
								Swal.fire({
									icon: "error",
									title: "Failed",
									text: "Failed to remove item."
								});
							}
						},
						error: function () {
							Swal.fire({
								icon: "error",
								title: "Error",
								text: "Error while removing item. Please try again."
							});
						}
					});
				}
			});
		}

		function ScenerioCardClick(id) {
			window.location.href = "/guac/View_Particular_Scenerio?Id=" + id;
		}
	</script>



	<!-- SweetAlert2 -->
	<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

	<script src="https://cdn.jsdelivr.net/npm/bootstrap-multiselect/dist/js/bootstrap-multiselect.min.js"></script>



	<script>
		$(document).ready(function () {
			// Initialize dropdowns

			$('#scenarioDropdown').multiselect({
				includeSelectAllOption: true,
				enableFiltering: true,
				maxHeight: 250,
				buttonWidth: '100%',
				nonSelectedText: '--Please Select Scenario--'
			});

			$('.dropdown-toggle').dropdown();

			$("#addScenarioForm").on("submit", function (event) {
				event.preventDefault(); // prevent default form submission

				let scenarioId = $("#scenarioDropdown").val();

				if (!scenarioId) {
					Swal.fire({
						icon: "warning",
						title: "No Scenario Selected",
						text: "Please select a scenario before adding."
					});
					return;
				}

				// Get playlistId from URL (http://localhost:9089/guac/View_Particular_Playlist?Id=2)
				let urlParams = new URLSearchParams(window.location.search);
				let playlistId = urlParams.get("Id");

				// Send AJAX request to controller
				let scenarioIds = $("#scenarioDropdown").val(); // this is an array when multiselect is used
				// example: [3, 5, 7]

				$.ajax({
					type: "POST",
					url: "/guac/addplaylist_Scenario",
					traditional: true,   // ðŸ”‘ ensures array is sent as scenarioId=3&scenarioId=5&scenarioId=7
					data: {
						playlistId: playlistId,
						scenarioId: scenarioIds
					},
					success: function (response) {
						$("#addScenarioModal").modal("hide");
						if (response == "success") {
							Swal.fire({
								icon: "success",
								title: "Scenario(s) Added",
								text: "Selected scenario(s) added successfully!",
								timer: 2000,
								showConfirmButton: false
							}).then(() => location.reload());
						}
						else {
							window.location = "/403";
						}

					},
					error: function () {
						Swal.fire({
							icon: "error",
							title: "Failed",
							text: "Failed to add scenario(s). Try again."
						});
					}
				});

			});
		});


		$("#addSubPlaylistForm").on("submit", function (event) {
			event.preventDefault(); // prevent default form submission

			let subPlaylistId = $("#subPlaylistDropdown").val();

			if (!subPlaylistId) {
				Swal.fire({
					icon: "warning",
					title: "No Sub Playlist Selected",
					text: "Please select a sub playlist before adding."
				});
				return;
			}

			// Get parent playlistId from URL
			let urlParams = new URLSearchParams(window.location.search);
			let playlistId = urlParams.get("Id");

			$.ajax({
				type: "POST",
				url: "/guac/addplaylist_SubPlaylist",
				data: {
					playlistId: playlistId,
					subPlaylistId: subPlaylistId
				},
				success: function (response) {
					$("#addSubPlaylistModal").modal("hide");

					if (response == "success") {
						Swal.fire({
							icon: "success",
							title: "Sub Playlist Added",
							text: "Sub Playlist has been added successfully!",
							timer: 2000,
							showConfirmButton: false
						}).then(() => location.reload());
					}
					
					else{
						window.location = "/403";
					}

				},
				error: function () {
					Swal.fire({
						icon: "error",
						title: "Failed",
						text: "Failed to add sub playlist. Try again."
					});
				}
			});
		});

		function handleActionChange(selectElement, playlistId) {
			const action = selectElement.value;

			if (action === "edit") {
				editPlaylist(playlistId);
			} else if (action === "delete") {
				deletePlaylist(playlistId);
			}

			// Reset dropdown
			selectElement.value = "";
		}

		function editPlaylist(id) {
			Swal.fire({
				title: 'Are you sure?',
				text: "You are about to edit this playlist (ID: " + id + ").",
				icon: 'question',
				showCancelButton: true,
				confirmButtonText: 'Yes, Edit it!',
				cancelButtonText: 'Cancel',
				confirmButtonColor: '#3085d6',
				cancelButtonColor: '#d33'
			}).then((result) => {
				if (result.isConfirmed) {
					window.location.href = '/guac/editplaylist/' + id;
				}
			});
		}

		function deletePlaylist(id) {
			Swal.fire({
				title: 'Are you sure?',
				text: "This action will permanently delete the playlist (ID: " + id + ").",
				icon: 'warning',
				showCancelButton: true,
				confirmButtonText: 'Yes, Delete it!',
				cancelButtonText: 'Cancel',
				confirmButtonColor: '#e74c3c',
				cancelButtonColor: '#6c757d'
			}).then((result) => {
				if (result.isConfirmed) {
					window.location.href = '/guac/deletplaylist/' + id;
				}
			});
		}
	</script>

</body>

</html>