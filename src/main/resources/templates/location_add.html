<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head th:include="template :: headFragment(${pageTitle})"></head>

<body class="hold-transition sidebar-mini layout-fixed">
	<div class="wrapper">

		<div th:replace="fragments/header :: header"></div>

		<div th:replace="fragments/sidebar :: aside"></div>

		<div class="content-wrapper">

			<section class="content-header">
				<div class="container-fluid">
					<div class="row mb-2">
						<div class="col-sm-6">
							<h1>Add Location</h1>
						</div>
						<div class="col-sm-6">
							<ol class="breadcrumb float-sm-right">
								<li class="breadcrumb-item"><a href="#">Home</a></li>
								<li class="breadcrumb-item active">Add Location</li>
							</ol>
						</div>
					</div>
				</div>
			</section>

			<section class="content">
				<div class="container-fluid">
					<div class="row">
						<div class="col-md-12">
							<div class="card card-secondary">
								<div class="card-header">
									<div class="row">
										<div class="col-md-10">
											<h3 class="card-title" style="padding-top: 10px">[[${pageTitle}]]</h3>
										</div>
										<div class="col-md-2">
											<a th:href="@{'/location/view/'}"
												class="btn btn-block bg-gradient-primary">View</a>
										</div>
									</div>
								</div>
								<form th:action="@{/location/save}" method="post"
									enctype="multipart/form-data" th:object="${objEnt}">
									<input type="hidden" th:field="*{id}" />
									<div class="card-body">
										<div class="row">

											<div class="col-md-6">
												<div class="form-group">
													<label for="location_name">DC Location</label> <input
														tabindex="2" type="text" th:field="*{location_name}"
														onchange="checkDuplicateLocation(this.value)" required
														id="location_name" name="location_name"
														class="form-control" placeholder="Enter DC location" />
												</div>

												<div class="form-group">
													<label for="physical_server_iP">Physical Server IP</label>
													<select tabindex="1" id="physical_server_iP"
														th:field="*{physical_server_iP}" required name="physical_server_iP"
														class="form-control" data-placeholder="Select Physical Server IP"
														style="width: 100%;">
														<option value=''>SELECT</option>
														<option th:each="ob:${physicalServerIPList}" th:value="${ob[1]}"
															th:text="${ob[1]}" /></option>
													</select>
												</div>


											</div>

											<div class="col-md-6">
												<div class="form-group">
													<label for="location_name">VM Creation Path</label> <input
														tabindex="2" type="text" th:field="*{vm_creation_path}"
														required id="vm_creation_path" name="vm_creation_path"
														class="form-control"
														placeholder="Provide VM Creation path" />
												</div>
												<div class="form-group">
													<label for="description">Description</label> <input
														tabindex="2" type="text" th:field="*{description}"
														required id="description" name="description"
														class="form-control" placeholder="Provide Description" />
												</div>
											</div>
										</div>
									</div>
									<div class="card-footer">
										<button type="submit" id="locationSubmit"
											class="btn btn-primary">Save</button>
									</div>
								</form>
							</div>
						</div>
					</div>
				</div>
				<!-- /.container-fluid -->
			</section>
			<!-- /.content -->
		</div>
		<div th:replace="fragments/footer :: footer"></div>
	</div>

	<!-- <div th:replace="template :: jsscript"></div> -->

	<!-- jQuery -->
	<script th:src="@{/webtemplate/plugins/jquery/jquery.min.js}"></script>
	<!-- jQuery UI 1.11.4 -->
	<script th:src="@{/webtemplate/plugins/jquery-ui/jquery-ui.min.js}"></script>
	<!-- Resolve conflict in jQuery UI tooltip with Bootstrap tooltip -->
	<script>
		$.widget.bridge('uibutton', $.ui.button)
	</script>
	<!-- Bootstrap 4 -->
	<script
		th:src="@{/webtemplate/plugins/bootstrap/js/bootstrap.bundle.min.js}"></script>
	<!-- ChartJS -->
	<script th:src="@{/webtemplate/plugins/chart.js/Chart.min.js}"></script>
	<!-- Sparkline -->
	<!-- 	<script th:src="@{/webtemplate/plugins/sparklines/sparkline.js}"></script> -->
	<!-- JQVMap -->
	<!-- <script th:src="@{/webtemplate/plugins/jqvmap/jquery.vmap.min.js}"></script>
	<script th:src="@{/webtemplate/plugins/jqvmap/maps/jquery.vmap.usa.js}"></script> -->
	<!-- jQuery Knob Chart -->
	<script th:src="@{/webtemplate/plugins/jquery-knob/jquery.knob.min.js}"></script>
	<!-- daterangepicker -->
	<script th:src="@{/webtemplate/plugins/moment/moment.min.js}"></script>
	<script
		th:src="@{/webtemplate/plugins/daterangepicker/daterangepicker.js}"></script>
	<!-- Tempusdominus Bootstrap 4 -->
	<script
		th:src="@{/webtemplate/plugins/tempusdominus-bootstrap-4/js/tempusdominus-bootstrap-4.min.js}"></script>
	<!-- Summernote -->
	<script
		th:src="@{/webtemplate/plugins/summernote/summernote-bs4.min.js}"></script>
	<!-- overlayScrollbars -->
	<script
		th:src="@{/webtemplate/plugins/overlayScrollbars/js/jquery.overlayScrollbars.min.js}"></script>
	<!-- AdminLTE App -->
	<script th:src="@{/webtemplate/dist/js/adminlte.js}"></script>
	<!-- AdminLTE for demo purposes -->
	<script th:src="@{/webtemplate/dist/js/demo.js}"></script>
	<!-- AdminLTE dashboard demo (This is only for demo purposes) -->
	<!-- <script th:src="@{/webtemplate/dist/js/pages/dashboard.js}"></script> -->
	<!--End Common JS  -->

	<script
		th:src="@{/webtemplate/plugins/jquery-validation/jquery.validate.min.js}"></script>
	<script
		th:src="@{/webtemplate/plugins/jquery-validation/additional-methods.min.js}"></script>
	<script th:src="@{/webtemplate/plugins/sweetalert2/sweetalert2.min.js}"></script>
	<script th:src="@{/webtemplate/plugins/select2/js/select2.full.min.js}"></script>

	<script
		th:src="@{/webtemplate/plugins/datatables/jquery.dataTables.min.js}"></script>
	<script
		th:src="@{/webtemplate/plugins/datatables-bs4/js/dataTables.bootstrap4.min.js}"></script>
	<script
		th:src="@{/webtemplate/plugins/datatables-responsive/js/dataTables.responsive.min.js}"></script>
	<script
		th:src="@{/webtemplate/plugins/datatables-responsive/js/responsive.bootstrap4.min.js}"></script>
	<script
		th:src="@{/webtemplate/plugins/datatables-buttons/js/dataTables.buttons.min.js}"></script>
	<script
		th:src="@{/webtemplate/plugins/datatables-buttons/js/buttons.bootstrap4.min.js}"></script>
	<script th:src="@{/webtemplate/plugins/jszip/jszip.min.js}"></script>
	<script th:src="@{/webtemplate/plugins/pdfmake/pdfmake.min.js}"></script>
	<script th:src="@{/webtemplate/plugins/pdfmake/vfs_fonts.js}"></script>
	<script
		th:src="@{/webtemplate/plugins/datatables-buttons/js/buttons.html5.min.js}"></script>
	<script
		th:src="@{/webtemplate/plugins/datatables-buttons/js/buttons.print.min.js}"></script>
	<script
		th:src="@{/webtemplate/plugins/datatables-buttons/js/buttons.colVis.min.js}"></script>
	<script th:src="@{/webtemplate/plugins/sweetalert2/sweetalert2.min.js}"></script>
	<script type="text/javascript"
		th:src="@{/custom_js/datatable.checkbox.min.js}"></script>
</body>
<script type="text/javascript">
	function checkDuplicateLocation(location) {
		$.ajax({
			url : '/location/checkDuplicateLocation',
			data : {
				"location" : location
			},
			success : function(result) {
				if (result == "duplicate") {
					Swal.fire({
						position : 'top',
						icon : 'warning',
						title : 'Location name already Exists',
						showConfirmButton : false,
						timer : 3000
					})
					$('#locationSubmit').prop("disabled", true);
				} else {
					$('#locationSubmit').prop("disabled", false);
				}
			}
		});
	}
</script>
<script type="text/javascript">
	$('document')
			.ready(
					function() {

						var vmcreationpath = document
								.getElementById("vm_creation_path");

						var physicalserveriP = document
								.getElementById("physical_server_iP");

						$('#vm_creation_path')
								.keyup(
										function() {
											var path = $(this).val();
											var pathPattern = /^((\/[^\/]+)+\/?|([a-zA-Z]:\\|\\\\)([^\\\/:*?"<>|\r\n]+\\)*[^\\\/:*?"<>|\r\n]*\\?)$/;
											if (pathPattern.test(path)) {
												vmcreationpath
														.setCustomValidity('');
												$('#locationSubmit').prop(
														'disabled', false);
											} else {
												vmcreationpath
														.setCustomValidity('Please Enter valid VM Creation Path');
												// $('#adduserForm').prop('disabled', true);
											}
										});

						$('#physical_server_iP')
								.keyup(
										function() {
											var serverip = $(this).val();
											var serveripPattern = /^((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])(\.(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])){3}|([0-9a-fA-F]{1,4}:){7}([0-9a-fA-F]{1,4}|:)|(([0-9a-fA-F]{1,4}:){1,7}|:):(([0-9a-fA-F]{1,4}:){1,7}|:))$/;
											if (serveripPattern.test(serverip)) {
												physicalserveriP
														.setCustomValidity('');
												$('#locationSubmit').prop(
														'disabled', false);
											} else {
												physicalserveriP
														.setCustomValidity('Please Enter valid Server IP');
												// $('#adduserForm').prop('disabled', true);
											}
										});

					});
</script>
</html>