<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<title>Dashboard</title>
<head th:include="templateListing :: headFragment"></head>

<!-- <link rel="stylesheet"
	href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">  -->
<link rel="stylesheet"
	th:href="@{/webtemplate/css/cloudfont-awesome.min.css}">
<link rel="stylesheet"
	th:href="@{/webtemplate/css/font-awesome.min.css}">
<style>
#page {
	/* 	background: #e3e6e7 url(/webtemplate/dist/img/canarispng.png) repeat; */
	color: #61686d;
	font: 14px "Helvetica Neue", Helvetica, Arial, Verdana, sans-serif;
	font-weight: lighter;
	padding-bottom: 60px;
}

#page {
	background: #ffffff;
	width: 878px;
	margin: 0 auto;
	margin-top: 80px;
	display: block;
	border: 1px solid #c4c7c7;
	padding: 40px 40px 120px 40px;
	position: relative;
	z-index: 0;
}

.page-shadow {
	/* 	background-image: url(images/page-shadow.png); */
	width: 992px;
	height: 60px;
	margin: 0 auto;
	margin-top: -1px;
	z-index: 1;
	position: relative;
}

#h1id {
	color: #4d5357;
	font-weight: lighter;
	font-size: 56px;
	margin: 40px 0 0 0;
}

.terms {
	float: left;
	width: 400px;
	margin: 0 0 40px 0;
	font-size: 12px;
	color: #a1a7ac;
	line-height: 180%;
}

.terms strong {
	font-size: 16px;
}

.recipient-address {
	padding-top: 60px;
	width: 200px;
}

.company-logoMy {
	/* 	width: 202px; */
	height: 81px;
	position: absolute;
	right: 40px;
	top: 40px;
}

.company-addressMy {
	width: 200px;
	color: #a1a7ac;
	position: absolute;
	right: 40px;
	top: 130px;
	text-align: right;
	font-size: 16px;
}

.status {
	position: absolute;
	top: -5px;
	left: -5px;
	text-indent: -5000px;
	width: 128px;
	height: 128px;
}

/* .draft { */
/* 	background-image: url(images/status-draft.png); */
/* } */

/* .sent { */
/* 	background-image: url(images/status-sent.png); */
/* } */

/* .paid { */
/* 	background-image: url(images/status-paid.png); */
/* } */

/* .overdue { */
/* 	background-image: url(images/status-overdue.png); */
/* } */
hr {
	clear: both;
	border: none;
	background: none;
	border-bottom: 1px solid #d6dde2;
}

.pay-buttons {
	text-align: center;
	width: 400px;
	margin: 0 auto;
	margin-top: 20px;
}

/* .pay-paypal { */
/* 	display: block; */
/* 	width: 200px; */
/* 	height: 45px; */
/* 	background: url('images/pay-buttons.png') no-repeat; */
/* 	text-indent: -5000px; */
/* 	background-position: 0 0; */
/* 	float: left; */
/* } */
.pay-paypal:hover {
	background-position: 0 -45px;
}

.pay-paypal:active {
	background-position: 0 -90px;
}

.pay-card {
	display: block;
	float: left;
	width: 165px;
	height: 45px;
	/* 	background: url('images/pay-buttons.png') no-repeat; */
	text-indent: -5000px;
	background-position: -200px 0;
}

.pay-card:hover {
	background-position: -200px -45px;
}

.pay-card:active {
	background-position: -200px -90px;
}

.total-due {
	float: right;
	width: 200px;
	border: 1px solid #d6dde2;
	margin: 0 0 40px 0;
	padding: 0;
	border-radius: 3px;
	-moz-border-radius: 3px;
	-webkit-border-radius: 3px;
	text-align: right;
}

.total-heading {
	background: #e7ebee;
	height: 24px;
	color: #63676b;
	text-shadow: 0 1px 1px #ffffff;
	padding: 8px 20px 0 0;
	-moz-box-shadow: 0 2px 2px rgba(0, 0, 0, 0.1);
	-webkit-box-shadow: 0 2px 2px rgba(0, 0, 0, 0.1);
	box-shadow: inset 0px 0px 0px 1px rgba(255, 255, 255, 0.5), 0 2px 2px
		rgba(0, 0, 0, 0.08);
	border-bottom: 1px solid #d6dde2;
	font-weight: bold;
}

.total-heading p, .total-amount p {
	margin: 0;
	padding: 0;
}

.total-amount {
	padding: 15px 20px 15px 0;
	color: #4d5357;
	font-size: 32px;
}

#tableinvoiceperticular.tablesorter {
	width: 100%;
	text-align: left;
	border: 1px solid #d6dde2;
	border-radius: 3px;
	-moz-border-radius: 3px;
	-webkit-border-radius: 3px;
	margin: 40px 0;
	color: #a1a7ac;
}

#tableinvoiceperticular.tablesorter thead tr th, #tableinvoiceperticular.tablesorter tfoot tr th
	{
	margin: 0;
}

#tableinvoiceperticular.tablesorter thead tr .header {
	/* 	background: #e7ebee url(images/arrows-both.png) no-repeat center right; */
	cursor: pointer;
	height: 60px;
	color: #63676b;
	text-shadow: 0 1px 1px #ffffff;
	padding-left: 20px;
	-moz-box-shadow: 0 2px 2px rgba(0, 0, 0, 0.1);
	-webkit-box-shadow: 0 2px 2px rgba(0, 0, 0, 0.1);
	box-shadow: inset 0px 0px 0px 1px rgba(255, 255, 255, 0.5), 0 2px 2px
		rgba(0, 0, 0, 0.08);
	border-bottom: 1px solid #d6dde2;
}

#tableinvoiceperticular.tablesorter tbody td {
	padding: 20px;
	vertical-align: top;
}

#tableinvoiceperticular.tablesorter tbody tr.even td {
	background: #f6f8f9;
}

#tableinvoiceperticular.tablesorter thead tr .headerSortUp {
	/* 	background-image: url(images/arrow-up.png); */
	
}

#tableinvoiceperticular.tablesorter thead tr .headerSortDown {
	/* 	background-image: url(images/arrow-down.png); */
	
}

#tableinvoiceperticular.tablesorter thead tr .headerSortDown,
	#tableinvoiceperticular.tablesorter thead tr .headerSortUp {
	
}

.stripemy {
	border-bottom: 1px solid #000;
	border-top: 1px solid #000;
}

.with-chevron[aria-expanded='true'] i {
	display: block;
	transform: rotate(180deg) !important;
}

.nav-tabs>li.active>a, .nav-tabs>li.active>a:focus, .nav-tabs>li.active>a:hover
	{
	color: #555;
	cursor: default;
	background-color: #fff;
	border: 1px solid #ddd;
	border-bottom-color: transparent;
}
</style>
</head>
<body class="hold-transition sidebar-mini layout-fixed sidebar-collapse">
	<div class="wrapper">
		<div th:replace="fragments/DashboardHeader.html :: header"></div>
		<div th:replace="fragments/sidebar :: aside"></div>
		<div class="content-wrapper"
			style="background-color: #e8e9ec !important;">
			<section class="content-header">
				<div class="container-fluid">
					<div class="row mb-2">
						<div class="col-sm-6">
							<h1>Dashboard</h1>
						</div>
						<!-- 						<div class="col-sm-6"> -->
						<!-- 							<ol class="breadcrumb float-sm-right"> -->
						<!-- 								<li class="breadcrumb-item"><a href="#">Home</a></li> -->
						<!-- 								<li class="breadcrumb-item active">Billing Master</li> -->
						<!-- 							</ol> -->
						<!-- 						</div> -->
					</div>
				</div>
			</section>

			<section class="content">
				<div class="container-fluid">
					<div class="row">
						<div class="col-md-9">

							<div class="card"
								style="background: #ffffffb5; width: 100%; padding: 2%; min-height: 500px; max-height: 500px; overflow: auto;">
								<div class="default-tab">
									<ul class="nav nav-tabs" role="tablist">
										<li class="nav-item"><a class="nav-link active"
											data-toggle="tab" href="#HypervTable">All VMs HyperV /
												KVM</a></li>
										<li class="nav-item"><a class="nav-link"
											data-toggle="tab" href="#OpenStackTable"
											onclick="openstacktabOnclick()">OpenStack</a></li>
									</ul>
									<div class="tab-content">

										<!-- Basic Info -->
										<div class="tab-pane fade show active" id="HypervTable"
											role="tabpanel">
											<table id="VmTable"
												class="table table-bordered table-striped">
												<thead style="background-color: #e2e2e2">
													<tr>
														<th class="text-center"></th>
														<th class="text-center">Group</th>
														<th class="text-center">Billing Start Date</th>
														<th class="text-center">Instance IP</th>
														<th class="text-center">Cloud Instances</th>
														<!-- 														<th class="text-center">VM source</th> -->
														<th class="text-center">Instance ID</th>
<!-- 														<th class="text-center">Hostname</th> -->
<!-- 														<th class="text-center">Physical Server IP</th> -->
														<th class="text-center">PO Status</th>
														<th class="text-center">Status</th>
														
														<!-- 											<th class="text-center">VM Status</th> -->
														<th class="text-center">Created on</th>

<!-- 														<th class="text-center">OS</th> -->

														<th sec:authorize="hasRole('ROLE_SUPERADMIN')"
															class="text-center">Switch</th>





														<th class="text-center">Device Mac</th>
														<th class="text-center">Location</th>
<!-- 														<th class="text-center">Password</th> -->
														<!-- <th class="text-center">Action</th> -->
													</tr>
												</thead>
												<tbody>

													<tr th:each="obj,keyPairStat : ${listObj}" class="odd"
														style="background-color: #fff;">
														<!-- 														<td>[[${obj.Id}]]</td> -->
														<th scope="row" th:text="${keyPairStat.count}">1</th>
														<td>[[${obj.groupName}]]</td>
														<td>[[${obj.created_on}]]</td>
														<td><span class="glow-span"
															th:if="${obj.instance_ip != null}"
															style="background-color: #f1faff; cursor: pointer">[[${obj.instance_ip}]]</span>
															<span th:if="${obj.instance_ip == null}">-</span></td>
														<td>
															<div class="row">
																<div class="col-md-2">
																	<i class="fa fa-windows"
																		th:if="${#strings.contains(obj.subproduct_id.getSub_product_name, 'Windows')}"
																		style="font-size: 35px; color: dodgerblue; padding-top: 2px"></i>
																	<img
																		th:unless="${#strings.contains(obj.subproduct_id.getSub_product_name, 'Windows')}"
																		src="/webtemplate/dist/img/Ubuntu.png"
																		style="height: 63px; width: 61px; margin-left: -10px;">
																</div>

																<div class="col-md-10">
																	<h3 class="card-title"
																		style="align-items: flex-start !important; flex-direction: column !important; display: flex;">

																		<span class="card-title" th:value="${obj.id}"
																			th:onclick="'viewCloudServerDetails(' + ${obj.id} + ')'"
																			style="font-weight: bold; cursor: pointer;">
																			[[${obj.instance_name}]]</span>
																		<!--  <span class="card-title"
																style="font-size: 1rem !important; color: #b5b5c3 !important">
																[[${obj.cpuAssigned}]] / [[${obj.memoryAssigned}]]
																/ [[${obj.diskAssigned}]] /</span> -->
																		<span class="card-title"
																			style="font-size: 1rem !important; color: #b5b5c3 !important">
																			<span
																			th:text="${#strings.isEmpty(obj.cpuAssigned) ? obj.price_id.getvCpu : obj.cpuAssigned + 'CPU'}"></span>
																			/ <span
																			th:text="${obj.memoryAssigned != '-'} ? ${obj.memoryAssigned} + ' GB' : ${obj.price_id.getRam}"></span>
																			<!-- /
																			 <span
																			th:text="${obj.diskAssigned != '-'} ? ${obj.diskAssigned} + ' GB' : ${obj.price_id.getSsd_disk}"></span>
																			 -->
																		</span>

																	</h3>
																</div>

															</div>
														</td>
														<!-- 														<td>HyperV</td> -->
														<td>[[${obj.Id}]]</td>
														<!-- <td>[[${obj.instance_name}]]</td> -->
<!-- 														<td>[[${obj.computer_name}]]</td> -->
<!-- 														<td>[[${obj.physicalServerIP}]]</td> -->
														<td><span style="cursor: pointer">
																[[${obj.request_status == 'Approved' ? 'In Use' :
																obj.request_status}]] </span></td>
														<td
															th:text="${(obj.vm_state != 'off' && obj.vm_state != 'Off') ? obj.vm_state :'stop'}"></td>
														<!-- 											<td>[[${obj.vm_start_stop_status}]]</td> -->
														<td>[[${obj.created_on}]]</td>

<!-- 														<td>[[${obj.subproduct_id.getSub_product_name}]]</td> -->


														<td sec:authorize="hasRole('ROLE_SUPERADMIN')">[[${obj.switch_id.getSwitch_name}]]</td>





														<td>[[${obj.mac_address}]]</td>
														<td>[[${obj.location_id.getLocation_name}]]</td>
<!-- 														<td>[[${obj.getInstance_password}]]</td> -->
														<!-- <td><a
												th:href="@{'/cloud_instance_user/delete/' + ${obj.id}+'~'+${obj.instance_name}}"
												th:tutorialTitle="${obj.instance_name}" id="btnDelete"
												title="Delete this tutorial" class="fa fa-trash btn-delete"></a>
												<a class="fa fa-edit"></a></td> -->

													</tr>

												</tbody>
											</table>

										</div>

										<div class="tab-pane fade show" id="OpenStackTable"
											role="tabpanel">
											<table id="openstacktableid"
												class="table table-bordered table-striped">
												<thead style="background-color: #e2e2e2">
													<tr>
														<th class="text-center">Sr No.</th>


														<th class="text-center">Name</th>
														<th class="text-center">Status</th>
														<th class="text-center">Image</th>
														<th class="text-center">Flavor</th>
														<th class="text-center">VM State</th>

														<th class="text-center">Created</th>
														<th class="text-center">Updated</th>
														<th class="text-center">Disk Config</th>
														<th class="text-center">Progress</th>
														<th class="text-center">Availability Zone</th>
														<th class="text-center">Key Name</th>
														<th class="text-center">Launched At</th>
														<th class="text-center">Terminated At</th>
														<th class="text-center">Host</th>
														<th class="text-center">Instance Name</th>
														<th class="text-center">Hypervisor Hostname</th>

														<th>Power State</th>
														<th>Addresses</th>
														<th>Links</th>
														<th>OpenStack IP</th>

														<th>ID</th>
														<th>Tenant ID</th>
														<th>User ID</th>
														<th>Host ID</th>

														<!-- 												<th>Security Group ID</th> -->
													</tr>
												</thead>
												<tbody>
													<tr th:each="obj, keyPairStat : ${listObjopenstack}"
														class="odd" style="background-color: #fff;">
														<th scope="row" th:text="${keyPairStat.count}">1</th>



														<td>[[${obj.name}]]</td>
														<td>[[${obj.status}]]</td>
														<td>[[${obj.image.imgName}]]</td>

														<td>[[${obj.flavor.name}]]</td>
														<td>[[${obj.vmState}]]</td>

														<td>[[${obj.created}]]</td>
														<td>[[${obj.updated}]]</td>

														<td>[[${obj.diskConfig}]]</td>
														<td>[[${obj.progress}]]</td>
														<td>[[${obj.availabilityZone}]]</td>
														<td>[[${obj.keyName}]]</td>
														<td>[[${obj.launchedAt}]]</td>
														<td>[[${obj.terminatedAt == 'null' ? '-' :
															obj.terminatedAt}]]</td>
														<td>[[${obj.host}]]</td>
														<td>[[${obj.instanceName}]]</td>
														<td>[[${obj.hypervisorHostname}]]</td>

														<td>[[${obj.powerState}]]</td>
														<td>[[${obj.addresses}]]</td>
														<td>[[${obj.links}]]</td>
														<td>[[${obj.openStackIp}]]</td>

														<td>[[${obj.instanceID}]]</td>
														<td>[[${obj.tenantId}]]</td>
														<td>[[${obj.userId}]]</td>
														<td>[[${obj.hostId}]]</td>

														<!-- 												<td>[[${obj.security_group_id}]]</td> -->


													</tr>
												</tbody>
											</table>

										</div>
									</div>
								</div>


							</div>

						</div>
						<div class="col-md-3">
							<div class="card" style="background: #ffffffb5; width: 100%;">

								<a data-toggle="collapse" href="#collapseExample2" role="button"
									aria-expanded="false" aria-controls="collapseExample1"
									class="btn btn-block py-2 shadow-sm with-chevron"
									sec:authorize="hasRole('ROLE_ADMIN')">
									<p
										class="d-flex align-items-center justify-content-between mb-0 px-3 py-2">
										<strong class="text-uppercase"
											style="color: #6a7385 !important;">Add/Modify User</strong><i
											class="fa fa-angle-down"></i>
									</p>
								</a>
								<div id="collapseExample2" class="collapse shadow-sm">
									<div class="card" style="background: #ffffff47;">
										<div class="card-body">
											<p class="mb-0 text-muted">
											<ul>
												<!-- 												<li><a href="/users/Customeview/Authorizer" -->
												<!-- 													style="color: black;"> -->

												<!-- 														<p>Authorizer</p> -->
												<!-- 												</a></li> -->
												<li><a href="/users/Customeview/Requester"
													style="color: black;">
														<p>Requester</p>
												</a></li>
												<li><a href="#"
													style="color: black; cursor: not-allowed;">
														<p>Account Manager</p>
												</a></li>
												<li><a href="#"
													style="color: black; cursor: not-allowed;">
														<p>Finance</p>
												</a></li>



											</ul>
											</p>
										</div>
									</div>
								</div>


								<a data-toggle="collapse" href="#collapseExample1" role="button"
									aria-expanded="false" aria-controls="collapseExample1"
									class="btn btn-block py-2 shadow-sm with-chevron">
									<p
										class="d-flex align-items-center justify-content-between mb-0 px-3 py-2">
										<strong class="text-uppercase"
											style="color: #6a7385 !important;">Create VM</strong><i
											class="fa fa-angle-down"></i>
									</p>
								</a>
								<div id="collapseExample1" class="collapse shadow-sm">
									<div class="card" style="background: #ffffff47;">
										<div class="card-body">
											<p class="mb-0 text-muted">
											<ul>
												<li><a href="/cloud_instance_user/vm_user"
													style="color: black;">

														<p>Create VM</p>
												</a></li>
												<li><a href="/cloud_instance/vm_database"
													style="color: black;">
														<p>Create VM With db</p>
												</a></li>
												<li><a href="/cloud_instance/vm_application"
													style="color: black;">
														<p>Create VM With app</p>
												</a></li>


											</ul>
											</p>
										</div>
									</div>
								</div>


								<a href="/firewall/new" role="button"
									class="btn btn-block py-2 shadow-sm"
									sec:authorize="hasRole('ROLE_ADMIN')">
									<p
										class="d-flex align-items-center justify-content-between mb-0 px-3 py-2">
										<strong class="text-uppercase"
											style="color: #6a7385 !important;">Firewall</strong>
									</p>
								</a> <a href="/loadBalancer/new" role="button"
									class="btn btn-block py-2 shadow-sm"
									sec:authorize="hasRole('ROLE_ADMIN')">
									<p
										class="d-flex align-items-center justify-content-between mb-0 px-3 py-2">
										<strong class="text-uppercase"
											style="color: #6a7385 !important;">Load Balancer</strong>
									</p>
								</a> <a href="/approval/allRequests" role="button"
									class="btn btn-block py-2 shadow-sm"
									sec:authorize="hasRole('ROLE_ADMIN')">
									<p
										class="d-flex align-items-center justify-content-between mb-0 px-3 py-2">
										<strong class="text-uppercase"
											style="color: #6a7385 !important;">Approval Request</strong>
									</p>
								</a> <a href="/approval/userRequests" role="button"
									class="btn btn-block py-2 shadow-sm"
									sec:authorize="hasRole('ROLE_USER')">
									<p
										class="d-flex align-items-center justify-content-between mb-0 px-3 py-2">
										<strong class="text-uppercase"
											style="color: #6a7385 !important;">Approval Request</strong>
									</p>
								</a> <a href="#" role="button" class="btn btn-block py-2 shadow-sm"
									style="cursor: not-allowed;">
									<p
										class="d-flex align-items-center justify-content-between mb-0 px-3 py-2">
										<strong class="text-uppercase"
											style="color: #6a7385 !important;">Report</strong>
									</p>
								</a> <a href="/cloud_instance/AlertDashboard" role="button"
									class="btn btn-block py-2 shadow-sm">
									<p
										class="d-flex align-items-center justify-content-between mb-0 px-3 py-2">
										<strong class="text-uppercase"
											style="color: #6a7385 !important;">Alerts</strong>
									</p>
								</a> <a href="/billing/view" role="button"
									class="btn btn-block py-2 shadow-sm"
									sec:authorize="hasRole('ROLE_ADMIN')">
									<p
										class="d-flex align-items-center justify-content-between mb-0 px-3 py-2">
										<strong class="text-uppercase"
											style="color: #6a7385 !important;">Billing</strong>
									</p>
								</a>

							</div>
						</div>

					</div>

				</div>
			</section>

		</div>

		<!-- 		modal start -->










		<div th:replace="fragments/footer :: footer"></div>
	</div>
	<div th:replace="templateListing :: jsscript"></div>
	<!-- 	<script type="text/javascript" -->
	<!-- 		th:src="@{/custom_js/datatable.checkbox.min.js}"></script> -->


	<script type="text/javascript"
		th:src="@{/webtemplate/Highchart/highcharts.js}"></script>

	<script type="text/javascript"
		th:src="@{/webtemplate/Highchart/exporting.js}"></script>

	<script
		th:src="@{/webtemplate/plugins/datatables-buttons/js/buttons.html5.min.js}"></script>
	<script
		th:src="@{/webtemplate/plugins/datatables-buttons/js/buttons.print.min.js}"></script>
	<script
		th:src="@{/webtemplate/plugins/datatables-buttons/js/buttons.colVis.min.js}"></script>


	<script type="text/javascript">
		
	</script>
	<script type="text/javascript">
		var table2;
		$(function() {

			var table = $("#VmTable").DataTable({

				// 			"order" : [ [ 1, 'asc' ] ],
				"responsive" : true,
				"lengthChange" : false,
				"autoWidth" : false,
				"sScrollX" : "100%",
				"sScrollXInner" : "140%",
				"bScrollCollapse" : true,
				pageLength : 5,
				searching : true
			});

			var table2 = $("#openstacktableid").DataTable({

				// 										"order" : [ [ 1, 'asc' ] ],
				"responsive" : true,
				"lengthChange" : false,
				"autoWidth" : false,
				"sScrollX" : "100%",
				"sScrollXInner" : "140%",
				"bScrollCollapse" : true,
				pageLength : 5,
				searching : true,

			});

		})

		function openstacktabOnclick() {
			// 			$($.fn.dataTable.tables(true)).DataTable().columns.adjust();
			setTimeout(function() {
				// 				table2.columns.adjust().draw();
				// 				$($.fn.dataTable.tables(true)).DataTable().columns.adjust();
				$($.fn.dataTable.tables(true)).DataTable().columns.adjust()
						.draw(false);
			}, 500);
		}

		function viewCloudServerDetails(instanceID) {
			//alert(instanceID)
			window.location = "/cloud_instance/VM/" + instanceID;
		}
	</script>
	<script th:inline="javascript">
		
	</script>
</body>

</html>